<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ù†Ø±Ø¯ - Ø§Ø±Ø¨Ø­ Ø£Ùˆ Ø§Ø®Ø³Ø±!</title>
  <style>
    body {
      font-family: 'Tahoma', sans-serif;
      background: linear-gradient(to right, #121212, #1e1e1e);
      color: white;
      text-align: center;
      padding: 2rem;
    }
    .container {
      max-width: 500px;
      margin: auto;
      background: #222;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
    }
    input, button, select {
      padding: 10px;
      margin: 10px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      width: 80%;
      max-width: 300px;
    }
    button {
      background: #2ecc71;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #27ae60;
    }
    .result {
      font-size: 20px;
      margin-top: 15px;
      min-height: 1.5em;
    }
    .balance {
      font-weight: bold;
      color: #f1c40f;
      margin-bottom: 10px;
    }
    .admin-area {
      margin-top: 30px;
      background: #111;
      padding: 15px;
      border-radius: 10px;
      text-align: right;
    }
    #adminPanel button {
      margin: 5px;
      width: auto;
      padding: 8px 12px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ² Ù„Ø¹Ø¨Ø© Ø§Ù„Ù†Ø±Ø¯ (Dice)</h1>

    <!-- ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ / ØªØ³Ø¬ÙŠÙ„ -->
    <div id="authSection">
      <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" />
      <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
      <br />
      <button onclick="register()">ØªØ³Ø¬ÙŠÙ„</button>
      <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
      <p id="authMsg"></p>
    </div>

    <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ø¹Ø¨Ø©ØŒ Ù…Ø®ÙÙŠ Ù‚Ø¨Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="gameSection" style="display:none;">
      <p class="balance">Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: <span id="balance">0</span> Ø¬Ù†ÙŠÙ‡</p>
      <label>Ø§Ø®ØªØ± Ø±Ù‚Ù… Ù…Ù† 1 Ø¥Ù„Ù‰ 6:</label>
      <select id="chosenNumber">
        <option>1</option><option>2</option><option>3</option>
        <option>4</option><option>5</option><option>6</option>
      </select>
      <br />
      <label>Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº Ø§Ù„Ù„Ø¹Ø¨:</label>
      <input type="number" id="betAmount" min="1" />
      <br />
      <button onclick="playGame()">Ø¥Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù†</button>
      <div class="result" id="gameResult"></div>

      <hr />
      <h3>ğŸ’° Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯</h3>
      <p>Ø§Ø¯ÙØ¹ Ø¥Ù„Ù‰ ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù…: <strong>01068871984</strong></p>
      <input type="number" id="chargeAmount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø´Ø­ÙˆÙ†" />
      <button onclick="submitRechargeRequest()">Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø§Ù„Ø´Ø­Ù†</button>
      <div id="rechargeMsg"></div>
      <p id="pendingRechargeInfo">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª.</p>

      <hr />
      <h3>ğŸ“¤ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h3>
      <input type="number" id="withdrawAmount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø±Ø§Ø¯ Ø³Ø­Ø¨Ù‡" />
      <button onclick="requestWithdraw()">Ø·Ù„Ø¨ Ø³Ø­Ø¨</button>
      <div id="withdrawMsg"></div>
    </div>

    <!-- Ø²Ø± Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
    <button onclick="showAdminLogin()" id="showAdminBtn" style="margin-top:20px; display:none;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>

    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© -->
    <div id="adminLoginBox" style="display:none; margin-top:10px;">
      <input type="password" id="adminPass" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©" />
      <button onclick="loginAsAdmin()">Ø¯Ø®ÙˆÙ„</button>
      <p id="adminLoginMsg" style="color: red;"></p>
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
    <div class="admin-area" id="adminPanel" style="display: none;">
      <h4>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ ÙÙ‚Ø·)</h4>

      <div>
        <h5>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø­Ù† ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±:</h5>
        <ul id="pendingRechargeList"></ul>
      </div>

      <div style="margin-top: 20px;">
        <h5>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨ ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±:</h5>
        <ul id="pendingWithdrawList"></ul>
      </div>
    </div>
  </div>

<script>
  const apiBase = 'http://localhost:3000/api'; // Ø¹Ø¯Ù„ Ù‡Ø°Ø§ Ø­Ø³Ø¨ Ø³ÙŠØ±ÙØ±Ùƒ

  let currentUser = null;
  let adminToken = null; // Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø¨Ø³ÙŠØ· (Ù‡Ù†Ø§ Ø³Ù†Ø³ØªØ®Ø¯Ù… ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± ÙÙ‚Ø·)

  // --- ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ ---
  async function register() {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();
    const authMsg = document.getElementById('authMsg');

    if (!username || !password) {
      authMsg.innerText = 'âš  Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±.';
      return;
    }

    try {
      const res = await fetch(apiBase + '/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password }),
      });

      if (!res.ok) {
        const data = await res.json();
        authMsg.innerText = `âš  ${data.message}`;
        return;
      }

      const user = await res.json();
      authMsg.style.color = 'green';
      authMsg.innerText = 'âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.';
    } catch (err) {
      authMsg.innerText = 'âš  Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….';
    }
  }

  // --- ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ---
  async function login() {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();
    const authMsg = document.getElementById('authMsg');

    if (!username || !password) {
      authMsg.innerText = 'âš  Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±.';
      return;
    }

    try {
      const res = await fetch(apiBase + '/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password }),
      });

      if (!res.ok) {
        const data = await res.json();
        authMsg.innerText = `âš  ${data.message}`;
        return;
      }

      currentUser = await res.json();
      authMsg.innerText = '';
      document.getElementById('authSection').style.display = 'none';
      document.getElementById('gameSection').style.display = 'block';
      document.getElementById('showAdminBtn').style.display = 'inline-block';

      updateBalance();
      fetchPendingRequests();
    } catch (err) {
      authMsg.innerText = 'âš  Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….';
    }
  }

  // --- ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶ ---
  function updateBalance() {
    if (!currentUser) return;
    document.getElementById('balance').innerText = currentUser.balance.toFixed(2);
  }

  // --- Ø§Ù„Ù„Ø¹Ø¨ ---
  async function playGame() {
    const chosen = parseInt(document.getElementById('chosenNumber').value);
    const bet = parseFloat(document.getElementById('betAmount').value);
    const resultDiv = document.getElementById('gameResult');

    if (isNaN(bet) || bet <= 0 || bet > currentUser.balance) {
      resultDiv.innerText = "âš  ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„!";
      return;
    }

    try {
      const res = await fetch(apiBase + '/play', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ userId: currentUser._id, amount: bet }),
      });

      if (!res.ok) {
        const data = await res.json();
        resultDiv.innerText = `âš  ${data.message}`;
        return;
      }

      const data = await res.json();

      currentUser.balance = data.balance;
      updateBalance();

      if (data.win) {
        resultDiv.innerText = `âœ… ÙØ²Øª! Ø±Ø¨Ø­Ùƒ: ${data.profit + bet} Ø¬Ù†ÙŠÙ‡`;
      } else {
        resultDiv.innerText = `âŒ Ø®Ø³Ø±Øª! Ø­Ø¸Ù‹Ø§ Ø£ÙˆÙØ± ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©.`;
      }
    } catch (err) {
      resultDiv.innerText = "âš  Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….";
    }
  }

  // --- Ø·Ù„Ø¨ Ø´Ø­Ù† ---
  async function submitRechargeRequest() {
    const amount = parseFloat(document.getElementById('chargeAmount').value);
    const msg = document.getElementById('rechargeMsg');

    if (isNaN(amount) || amount <= 0) {
      msg.innerText = "âš  Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº ØµØ§Ù„Ø­ Ù„Ù„Ø´Ø­Ù†.";
      return;
    }

    try {
      const res = await fetch(apiBase + '/request', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ userId: currentUser._id, amount, type: 'deposit' }),
      });

      if (!res.ok) {
        const data = await res.json();
        msg.innerText = `âš  ${data.message}`;
        return;
      }

      msg.style.color = 'green';
      msg.innerText = 'ğŸ“© ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø´Ø­Ù† Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©.';
      document.getElementById('chargeAmount').value = '';
      fetchPendingRequests();
    } catch (err) {
      msg.innerText = "âš  Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….";
    }
  }

  // --- Ø·Ù„Ø¨ Ø³Ø­Ø¨ ---
  async function requestWithdraw() {
    const amount = parseFloat(document.getElementById('withdrawAmount').value);
    const msg = document.getElementById('withdrawMsg');

    if (isNaN(amount) || amount <= 0) {
      msg.innerText = "âš  Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº Ø³Ø­Ø¨ ØµØ§Ù„Ø­.";
      return;
    }

    if (amount > currentUser.balance) {
      msg.innerText = "âš  Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø­Ø¨ Ø£ÙƒØ«Ø± Ù…Ù† Ø±ØµÙŠØ¯Ùƒ!";
      return;
    }

    // Ø´Ø±Ø· Ø§Ù„Ù„Ø¹Ø¨ Ø¨Ù†ÙØ³ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ÙˆØ¯Ø¹
    if (currentUser.deposited > 0 && currentUser.deposited > currentUser.totalBetPlayed) {
      msg.innerText = "âš  Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø­Ø¨ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø­ØªÙ‰ ØªÙ„Ø¹Ø¨ Ø¨Ù†ÙØ³ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø°ÙŠ Ø£ÙˆØ¯Ø¹ØªÙ‡.";
      return;
    }

    try {
      const res = await fetch(apiBase + '/request', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ userId: currentUser._id, amount, type: 'withdraw' }),
      });

      if (!res.ok) {
        const data = await res.json();
        msg.innerText = `âš  ${data.message}`;
        return;
      }

      msg.style.color = 'green';
      msg.innerText = 'ğŸ“¤ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©.';
      document.getElementById('withdrawAmount').value = '';
      fetchPendingRequests();
    } catch (err) {
      msg.innerText = "âš  Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….";
    }
  }

  // --- Ø¥Ø¸Ù‡Ø§Ø± ØµÙ†Ø¯ÙˆÙ‚ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ---
  function showAdminLogin() {
    document.getElementById('adminLoginBox').style.display = 'block';
  }

  // --- ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ---
  async function loginAsAdmin() {
    const pass = document.getElementById('adminPass').value;
    const adminLoginMsg = document.getElementById('adminLoginMsg');
    adminLoginMsg.innerText = '';

    if (pass !== '6NnhHH4KfCxSA22B') {
      adminLoginMsg.innerText = 'âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©!';
      return;
    }

    adminToken = pass; // Ø¨Ø¨Ø³Ø§Ø·Ø© Ù†Ø®Ø²Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ÙƒØªÙˆÙƒÙ†

    document.getElementById('adminPanel').style.display = 'block';
    document.getElementById('adminLoginBox').style.display = 'none';

    fetchPendingRequests();
  }

  // --- Ø¬Ù„Ø¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„Ø³Ø­Ø¨ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ---
  async function fetchPendingRequests() {
    if (!adminToken) return;

    try {
      const res = await fetch(apiBase + '/admin/requests', {
        headers: {
          'admin-password': adminToken,
        },
      });

      if (!res.ok) {
        alert('âš  Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¬Ù„Ø¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù‚Ø¯ ØªÙƒÙˆÙ† Ø®Ø§Ø·Ø¦Ø©)');
        return;
      }

      const requests = await res.json();

      // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„Ø´Ø­Ù† ÙˆØ³Ø­Ø¨
      const depositRequests = requests.filter(r => r.type === 'deposit');
      const withdrawRequests = requests.filter(r => r.type === 'withdraw');

      // Ø¹Ø±Ø¶ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø­Ù†
      const rechargeList = document.getElementById('pendingRechargeList');
      rechargeList.innerHTML = '';
      if (depositRequests.length === 0) {
        rechargeList.innerHTML = '<li>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø´Ø­Ù† Ù…Ø¹Ù„Ù‚Ø©.</li>';
      } else {
        depositRequests.forEach(req => {
          const li = document.createElement('li');
          li.innerHTML = `Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${req.userId}ØŒ Ø§Ù„Ù…Ø¨Ù„Øº: ${req.amount} Ø¬Ù†ÙŠÙ‡
            <button onclick="handleRequest('${req._id}', 'approve')">âœ… Ù‚Ø¨ÙˆÙ„</button>
            <button onclick="handleRequest('${req._id}', 'reject')">âŒ Ø±ÙØ¶</button>
          `;
          rechargeList.appendChild(li);
        });
      }

      // Ø¹Ø±Ø¶ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨
      const withdrawList = document.getElementById('pendingWithdrawList');
      withdrawList.innerHTML = '';
      if (withdrawRequests.length === 0) {
        withdrawList.innerHTML = '<li>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø³Ø­Ø¨ Ù…Ø¹Ù„Ù‚Ø©.</li>';
      } else {
        withdrawRequests.forEach(req => {
          const li = document.createElement('li');
          li.innerHTML = `Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${req.userId}ØŒ Ø§Ù„Ù…Ø¨Ù„Øº: ${req.amount} Ø¬Ù†ÙŠÙ‡
            <button onclick="handleRequest('${req._id}', 'approve')">âœ… Ù‚Ø¨ÙˆÙ„</button>
            <button onclick="handleRequest('${req._id}', 'reject')">âŒ Ø±ÙØ¶</button>
          `;
          withdrawList.appendChild(li);
        });
      }

    } catch (err) {
      alert('âš  Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.');
    }
  }

  // --- Ù‚Ø¨ÙˆÙ„ Ø£Ùˆ Ø±ÙØ¶ Ø·Ù„Ø¨ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ---
  async function handleRequest(requestId, action) {
    if (!adminToken) {
      alert('âŒ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø³Ø¤ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.');
      return;
    }

    try {
      const res = await fetch(`${apiBase}/admin/requests/${requestId}/${action}`, {
        method: 'POST',
        headers: {
          'admin-password': adminToken,
        },
      });

      if (!res.ok) {
        const data = await res.json();
        alert(`âš  ${data.message}`);
        return;
      }

      alert('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨.');
      fetchPendingRequests();

      // ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†ÙØ³Ù‡
      // Ù†Ø¹ÙŠØ¯ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯
      if (currentUser) {
        const userRes = await fetch(`${apiBase}/users/${currentUser._id}`);
        if (userRes.ok) {
          currentUser = await userRes.json();
          updateBalance();
        }
      }

    } catch (err) {
      alert('âš  Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨.');
    }
  }
</script>
</body>
</html>

